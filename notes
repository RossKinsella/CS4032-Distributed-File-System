There is some file locking built into ruby.
  File.flock